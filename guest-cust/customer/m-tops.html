<!DOCTYPE html>
<html lang="en">
<head>
  <title>ThriftHub | Shop Catalog</title>

  <meta charset="utf-8">
  <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="">
  
  <!-- Google Fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700%7COpen+Sans:400,400i,600,700' rel='stylesheet'>

  <!-- Css -->
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/magnific-popup.css" />
  <link rel="stylesheet" href="css/font-icons.css" />
  <link rel="stylesheet" href="css/sliders.css" />
  <link rel="stylesheet" href="css/style.css" />

  <!-- Favicons -->
  <link rel="shortcut icon" href="img/favicon.ico">
  <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png">
</head>

<body class="relative">
  <!-- Preloader -->
  <div class="loader-mask">
    <div class="loader">
      <div></div>
      <div></div>
    </div>
  </div>

  <main class="main-wrapper">
    <header class="nav-type-1">
      <!-- Fullscreen search -->
      <div class="search-wrap">
        <div class="search-inner">
          <div class="search-cell">
            <form method="get">
              <div class="search-field-holder">
                <input type="search" class="form-control main-search-input" placeholder="Search for">
                <i class="ui-close search-close" id="search-close"></i>
              </div>            
            </form>
          </div>
        </div>        
      </div> <!-- end fullscreen search -->

      <!-- Top Bar -->
      <div class="top-bar hidden-xs">
        <div class="container">
          <div class="top-bar-links flex-parent">
            <ul class="top-bar-currency-language">
              <li>
                Currency: <a href="#">MYR<i class="fa fa-angle-down"></i></a>
                <div class="currency-dropdown">
                  <ul>
                    <li><a href="#">MYR</a></li>
                    <li><a href="#">SGD</a></li>
                  </ul>
                </div>
              </li>
              <li class="language">
                Language: <a href="#">ENG<i class="fa fa-angle-down"></i></a>
                <div class="language-dropdown">
                  <ul>
                    <li><a href="#">English</a></li>
                    <li><a href="#">Malay</a></li>
                  </ul>
                </div>
              </li>
            </ul>
            <ul class="top-bar-acc" style="margin-right: 38%;">
              Pre-Raya Sale: Enjoy Free Shipping! <a href="m-tops.html" style="color:darkgoldenrod;">Shop Now</a>
            </ul>
          </div>
        </div>
      </div> <!-- end top bar -->

      <nav class="navbar navbar-responsive-top">
        <div class="navigation" id="sticky-nav">
          <div class="container relative">
            <nav class="navbar navbar-static-top">
              <div class="navigation" id="sticky-nav">
                <div class="container relative">
                  <div class="row flex-parent">
                    <div class="nav-wrap flex-child" style="margin-left: -60px;">
                      <div class="collapse navbar-collapse text-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">
                          <li class="dropdown">
                            <a href="#">Shop</a>
                            <i class="fa fa-angle-down dropdown-trigger"></i>
                            <ul class="dropdown-menu megamenu-wide">
                              <li>
                                <div class="megamenu-wrap container">
                                  <div class="row">
                                    <div class="col-md-2 megamenu-item"></div>
                                    <div class="col-md-3 megamenu-item">
                                      <ul class="menu-list">
                                        <li><span>For Him</span></li>
                                        <li><a href="m-tops.html">Men's Tops & Bottoms</a></li>
                                        <li><a href="m-foot.html">Men's Footwear</a></li>
                                        <li><a href="m-acc.html">Men's Accessories</a></li>
                                        <li><a href="m-bag.html">Men's Bags & Wallets</a></li>
                                      </ul>
                                    </div>
                                    <div class="col-md-3 megamenu-item">
                                      <ul class="menu-list">
                                        <li><span>For Her</span></li>
                                        <li><a href="w-tops.html">Women's Tops & Bottoms</a></li>
                                        <li><a href="w-foot.html">Women's Footwear</a></li>
                                        <li><a href="w-acc.html">Women's Accessories</a></li>
                                        <li><a href="w-bag.html">Women's Bags & Wallets</a></li>
                                      </ul>
                                    </div>
                                    <div class="col-md-3 megamenu-item">
                                      <ul class="menu-list">
                                        <li><span>For Kids</span></li>
                                        <li><a href="kids.html">Kids Fashion</a></li>
                                        <li><a href="kids-foot.html">Kids Footwear</a></li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                              </li>
                            </ul>
                          </li>
                          <li class="dropdown"><a href="about-us.html">About Us</a></li>
                          <li class="dropdown"><a href="contact.html">Contact Us</a></li>
                          <li class="dropdown"><a href="faq.html">F.A.Q</a></li>
                        </ul> <!-- end menu -->
                      </div> <!-- end collapse -->
                    </div> <!-- end col -->
                    <div class="navbar-header flex-child" style="margin-left: -130px;">
                      <!-- Logo -->
                      <div class="logo-wrap">
                        <a href="index.html">
                          <img class="thrifthub" width="160" height="50" src="img/thrifthub lg v1.png" srcset="img/thrifthub lg v1.png 1x, img/thrifthub lg v1.png 2x">
                        </a>
                      </div>
                      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                      </button>
                      <!-- Mobile cart -->
                      <div class="nav-cart mobile-cart hidden-lg hidden-md">
                        <div class="nav-cart-outer">
                          <div class="nav-cart-inner">
                            <a href="#" class="nav-cart-icon"></a>
                          </div>
                        </div>
                      </div>
                    </div> <!-- end navbar-header -->
                    <div class="flex-child flex-right nav-right hidden-sm hidden-xs">
                      <ul>
                        <li class="nav-register"><a href="myaccount.html"><i class="fa fa-user"></i></a></li>
                        <li class="nav-search-wrap style-2 hidden-sm hidden-xs">
                          <a href="#" class="nav-search search-trigger"><i class="fa fa-search"></i></a>
                        </li>
                        <li class="nav-cart">
                          <div class="nav-cart-outer">
                            <div class="nav-cart-inner">
                              <a href="#" class="nav-cart-icon" id="cartIcon">
                                <span class="nav-cart-badge" id="cartBadge">0</span>
                              </a>
                            </div>
                          </div>
                          <div class="nav-cart-container">
                            <div class="nav-cart-items" id="navCartItems"></div> <!-- end cart items -->
                            <div class="nav-cart-summary">
                              <span>Cart Subtotal</span>
                              <span class="total-price" id="navCartSubtotal">RM0.00</span>
                            </div>
                            <div class="nav-cart-actions mt-20">
                              <a href="shop-cart.html" class="btn btn-md btn-dark"><span>View Cart</span></a>
                              <a href="shop-checkout.html" class="btn btn-md btn-color mt-10"><span>Proceed to Checkout</span></a>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div> <!-- end row -->
                </div> <!-- end container -->
              </div> <!-- end navigation -->
            </nav> <!-- end navbar -->
          </div> <!-- end container -->
        </div> <!-- end navigation -->
      </nav> <!-- end navbar -->
    </header>

    <!-- Page Title -->
    <section class="page-title text-center bg-light">
      <div class="container relative clearfix">
        <div class="title-holder">
          <div class="title-text">
            <h1 class="uppercase">Men's Tops & Bottoms</h1>
            <ol class="breadcrumb">
              <li><a href="index.html">Home</a></li>
              <li class="active">Shop</li>
            </ol>
          </div>
        </div>
      </div>
    </section>

    <div class="content-wrapper oh">
      <!-- Catalogue -->
      <section class="section-wrap pt-80 pb-40 catalogue">
        <div class="container relative">
          <!-- Filter -->          
          <div class="shop-filter">
            <div class="view-mode hidden-xs">
              <span>View:</span>
              <a class="grid grid-active" id="grid"></a>
              <a class="list" id="list"></a>
            </div>
            <div class="filter-show hidden-xs">
              <span>Show:</span>
              <a href="#" class="show-option active" data-limit="12">12</a>
              <a href="#" class="show-option" data-limit="24">24</a>
              <a href="#" class="show-option" data-limit="all">all</a>
            </div>
            <form class="ecommerce-ordering">
              <select>
                <option value="default-sorting">Default Sorting</option>
                <option value="price-low-to-high">Price: high to low</option>
                <option value="price-high-to-low">Price: low to high</option>
                <option value="by-popularity">By Popularity</option>
                <option value="date">By Newness</option>
                <option value="rating">By Rating</option>
              </select>
            </form>
          </div>

          <div class="row">
            <div class="col-md-12 catalogue-col right mb-50">
              <div class="shop-catalogue grid-view">
                <div class="row items-grid" id="productsContainer">
                  <!-- Products will be dynamically inserted here -->
                </div> <!-- end row -->
              </div> <!-- end grid mode -->
              
              <!-- Pagination -->
              <div class="pagination-wrap clearfix">
                <p class="result-count" id="resultCount">Showing: 9 of 9 results</p>                 
              </div>
            </div> <!-- end col -->
          </div> <!-- end row -->
        </div> <!-- end container -->
      </section> <!-- end catalog -->

      <!-- Footer Type-1 -->
      <footer class="footer footer-type-1">
        <div class="container">
          <div class="footer-widgets">
            <div class="row">
              <div class="col-md-3 col-sm-12 col-xs-12">
                <div class="widget footer-about-us">
                  <img src="img/thrifthub lg v1.png" alt="" class="logo">
                  <p class="mb-40">ThriftHub store offers wide variety of used clothes at an affordable price.</p>
                  <div class="footer-socials">
                    <div class="social-icons nobase">
                      <a href="https://x.com/thrifthub_mls?s=21"><i class="fa fa-twitter"></i></a>
                      <a href="https://www.facebook.com/share/15CSCqVAFu/?mibextid=wwXIfr"><i class="fa fa-facebook"></i></a>
                      <a href="https://www.instagram.com/thrifthub_malaysia?igsh=YTFoYWFlMDB1Nmc2&utm_source=qr"><i class="fa fa-instagram"></i></a>
                    </div>
                  </div>
                </div>
              </div> <!-- end about us -->
              <div class="col-md-2 col-md-offset-1 col-sm-4 col-xs-12">
                <div class="widget footer-links">
                  <h5 class="widget-title bottom-line left-align grey">Explore</h5>
                  <ul class="list-no-dividers">
                    <li><a href="m-tops.html">Mens</a></li>
                    <li><a href="w-tops.html">Womens</a></li>
                    <li><a href="kids.html">Kids</a></li>
                  </ul>
                </div>
              </div>
              <div class="col-md-2 col-md-offset-1 col-sm-4 col-xs-12">
                <div class="widget footer-links">
                  <h5 class="widget-title bottom-line left-align grey">Information</h5>
                  <ul class="list-no-dividers">
                    <li><a href="delivery-info.html">Delivery Information</a></li>
                    <li><a href="about-us.html">About us</a></li>
                    <li><a href="contact.html">Contact us</a></li>
                    <li><a href="faq.html">F.A.Q</a></li>
                  </ul>
                </div>
              </div>
              <div class="col-md-2 col-md-offset-1 col-sm-4 col-xs-12">
                <div class="widget footer-links">
                  <h5 class="widget-title bottom-line left-align grey">Account</h5>
                  <ul class="list-no-dividers">
                    <li><a href="myaccount.html">My account</a></li>
                    <li><a href="shop-cart.html">My cart</a></li>
                    <li><a href="order-history.html">Order history</a></li>
                  </ul>
                </div>
              </div>
            </div> <!-- end row -->
          </div> <!-- end container -->
        </div> <!-- end footer widgets -->

        <div class="bottom-footer">
          <div class="container">
            <div class="row">
              <div class="col-sm-6 copyright sm-text-center">
                <span>
                  © <script>document.querySelector(".copyright span").innerHTML += new Date().getFullYear();</script>
                  ThriftHub Malaysia | Made by <a href="">Group 2</a>
                </span>
              </div>
              <div class="col-sm-6 col-xs-12 footer-payment-systems text-right sm-text-center mt-sml-10">
                <i class="fa fa-cc-visa"></i>
                <i class="fa fa-cc-mastercard"></i>
                <i class="fa fa-cc-amex"></i>
              </div>
            </div>
          </div>
        </div> <!-- end bottom footer -->
      </footer> <!-- end footer -->

      <div id="back-to-top">
        <a href="#top"><i class="fa fa-angle-up"></i></a>
      </div>
    </div> <!-- end content wrapper -->
  </main> <!-- end main wrapper -->

  <!-- jQuery Scripts -->
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <script type="text/javascript" src="js/plugins.js"></script>  
  <script type="text/javascript" src="js/scripts.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js"></script>
  <script type="module">
    // Firebase Configuration
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js';
    import { getAuth, signInAnonymously } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js';
    import { getFirestore, collection, query, where, orderBy, limit, onSnapshot, doc, getDoc } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js';

    const firebaseConfig = {
        apiKey: "AIzaSyBuks0O6_R_ltzxGJHM-G5LIBvoLvV_P6g",
        authDomain: "thrifthub-demo.firebaseapp.com",
        projectId: "thrifthub-demo",
        storageBucket: "thrifthub-demo.firebasestorage.app",
        messagingSenderId: "518014691134",
        appId: "1:518014691134:web:7fa4a771e1c664c9f92e6f",
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // Sign in anonymously for testing
    signInAnonymously(auth).then(() => {
        console.log('Signed in anonymously successfully');
    }).catch((error) => {
        console.error("Error signing in anonymously:", error);
    });

    // Cart management (stored in localStorage)
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Global variables for filtering
    let currentLimit = 12; // Default limit (show 12 products)

    // Function to load products for Men's Tops & Bottoms (category: m-tops.html) with show functionality
    function loadProducts() {
        const productsContainer = document.getElementById('productsContainer');
        let q = query(collection(db, "products"), where("category", "==", "m-tops.html"));

        // Apply limit if not "all"
        if (currentLimit !== 'all') {
            q = query(q, limit(currentLimit));
        }

        onSnapshot(q, (snapshot) => {
            productsContainer.innerHTML = ''; // Clear existing products
            snapshot.forEach((doc) => {
                const product = doc.data();
                const productId = doc.id;

                const productHtml = `
                    <div class="col-md-4 col-xs-6 product product-grid">
                        <div class="product-item clearfix">
                            <div class="product-img hover-trigger">
                                <a href="shop-single.html?id=${productId}">
                                    <img src="${product.imageUrl || 'img/shop/mt1.jpg'}" alt="${product.title || 'Product'}">
                                    <img src="${product.imageUrl || 'img/shop/mt1.jpg'}" alt="${product.title || 'Product'}" class="back-img">
                                </a>
                                <div class="hover-2">                    
                                    <div class="product-actions">
                                        <a href="#" class="product-add-to-wishlist">
                                            <i class="fa fa-heart"></i>
                                        </a>
                                    </div>                        
                                </div>
                                <a href="shop-single.html?id=${productId}" class="product-quickview">Quick View</a>
                            </div>

                            <div class="product-details">
                                <h3 class="product-title">
                                    <a href="shop-single.html?id=${productId}">${product.title || 'Untitled'}</a>
                                </h3>
                                <span class="category">
                                    <a href="m-tops.html">Men's Tops & Bottoms</a>
                                </span>
                            </div>

                            <span class="price">
                                ${product.price && product.price < (product.price * 1.3) ? `
                                    <del><span>RM${(product.price * 1.3).toFixed(2)}</span></del>
                                    <ins><span class="amount">RM${product.price.toFixed(2)}</span></ins>` : 
                                    `<ins><span class="amount">RM${product.price.toFixed(2)}</span></ins>`}
                            </span>
                            <div class="product-description">
                                <h3 class="product-title">
                                    <a href="shop-single.html?id=${productId}">${product.title || 'Untitled'}</a>
                                </h3>
                                <span class="price">
                                    ${product.price && product.price < (product.price * 1.3) ? `
                                        <del><span>RM${(product.price * 1.3).toFixed(2)}</span></del>
                                        <ins><span class="amount">RM${product.price.toFixed(2)}</span></ins>` : 
                                        `<ins><span class="amount">RM${product.price.toFixed(2)}</span></ins>`}
                                </span>
                                <span class="rating">
                                    <a href="#">13 Reviews</a>
                                </span>
                                <div class="clear"></div>
                                <p>${product.description || 'Our products are carefully curated to meet high-quality standards, ensuring you find something special with every purchase.'}</p>
                                <a href="#" class="btn btn-dark btn-md left add-to-cart" data-product-id="${productId}" data-size="${product.size || 'N/A'}"><span>Add to Cart</span></a>
                                <div class="product-add-to-wishlist">
                                    <a href="#"><i class="fa fa-heart"></i></a>
                                </div>
                            </div>         
                        </div>
                    </div>
                `;
                productsContainer.insertAdjacentHTML('beforeend', productHtml);
            });

            // Update result count
            updateResultCount(snapshot.size);
        }, (error) => {
            console.error("Error fetching products:", error);
            productsContainer.innerHTML = '<p class="error-message">Error loading products. Please try again later.</p>';
        });
    }

    // Function to update result count
    function updateResultCount(totalProducts) {
        const resultCount = document.getElementById('resultCount');
        const showing = currentLimit === 'all' ? totalProducts : Math.min(currentLimit, totalProducts);
        resultCount.textContent = `Showing: ${showing} of ${totalProducts} results`;
    }
    
    // Function to add product to cart (with size and debugging)
    function addToCart(productId) {
        console.log('Attempting to add product with ID:', productId);
        const productRef = doc(db, "products", productId);
        getDoc(productRef).then((docSnap) => {
            console.log('Document snapshot exists:', docSnap.exists());
            if (docSnap.exists()) {
                const product = docSnap.data();
                const size = product.size || 'N/A'; // Get size from Firestore or default to 'N/A'
                const existingItem = cart.find(item => item.id === productId && item.size === size);
                if (existingItem) {
                    existingItem.quantity += 1; // Increment quantity if item with same size exists
                } else {
                    cart.push({
                        id: productId,
                        name: product.title || 'Untitled',
                        price: product.price || 0,
                        imageUrl: product.imageUrl || 'img/shop/mt1.jpg',
                        size: size, // Add size to cart item
                        quantity: 1
                    });
                }
                alert(`${product.title || 'Product'} (Size: ${size}) added to cart!`);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartDisplay();
            } else {
                console.error("Product not found in Firestore for ID:", productId);
                alert("Product not found. Please try again.");
            }
        }).catch((error) => {
            console.error("Error fetching product:", error);
            alert("Error adding product to cart. Please try again.");
        });
    }

    // Function to update cart display in the navbar (optimized, including size)
    function updateCartDisplay() {
        const cartBadge = document.getElementById('cartBadge');
        const navCartItems = document.getElementById('navCartItems');
        const navCartSubtotal = document.getElementById('navCartSubtotal');

        // Update cart badge (number of items)
        cartBadge.textContent = cart.reduce((total, item) => total + item.quantity, 0) || 0;

        // Update cart items in the dropdown
        if (cart.length === 0) {
            navCartItems.innerHTML = '<p class="nav-cart-item">Your cart is empty.</p>';
            navCartSubtotal.textContent = 'RM0.00';
        } else {
            navCartItems.innerHTML = '';
            let subtotal = 0;
            cart.forEach((item) => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                const itemHtml = `
                    <div class="nav-cart-item clearfix">
                        <div class="nav-cart-img">
                            <a href="shop-single.html?id=${item.id}">
                                <img src="${item.imageUrl || 'img/shop/shop_item_1.jpg'}" alt="${item.name}">
                            </a>
                        </div>
                        <div class="nav-cart-title">
                            <a href="shop-single.html?id=${item.id}">
                                ${item.name} (Size: ${item.size})
                            </a>
                            <div class="nav-cart-price">
                                <span>${item.quantity} x</span>
                                <span>RM${item.price.toFixed(2)}</span>
                            </div>
                        </div>
                        <div class="nav-cart-remove">
                            <a href="#" class="remove" data-id="${item.id}" data-size="${item.size}" title="Remove this item">
                                <i class="ui-close"></i>
                            </a>
                        </div>
                    </div>
                `;
                navCartItems.insertAdjacentHTML('beforeend', itemHtml);
            });
            navCartSubtotal.textContent = `RM${subtotal.toFixed(2)}`;

            // Remove any existing event listener to prevent duplicates
            const existingListener = navCartItems._removeListener;
            if (existingListener) {
                navCartItems.removeEventListener('click', existingListener);
            }

            // Use event delegation for remove buttons with a unique identifier
            const removeListener = (e) => {
                if (e.target.classList.contains('remove') || e.target.closest('.remove')) {
                    e.preventDefault();
                    console.log('Remove button clicked'); // Debug log
                    const removeButton = e.target.classList.contains('remove') ? e.target : e.target.closest('.remove');
                    const productId = removeButton.getAttribute('data-id');
                    const size = removeButton.getAttribute('data-size');
                    console.log('Removing product ID:', productId, 'Size:', size); // Debug log
                    cart = cart.filter(item => !(item.id === productId && item.size === size));
                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCartDisplay();
                }
            };
            navCartItems.addEventListener('click', removeListener);
            navCartItems._removeListener = removeListener; // Store the listener to remove it later
        }
    }

    // Load products and set up event listeners when the page loads
    document.addEventListener("DOMContentLoaded", () => {
        loadProducts();

        // Use event delegation for "Add to Cart" buttons
        const productsContainer = document.getElementById('productsContainer');
        productsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-to-cart') || e.target.closest('.add-to-cart')) {
                e.preventDefault();
                const button = e.target.classList.contains('add-to-cart') ? e.target : e.target.closest('.add-to-cart');
                const productId = button.getAttribute('data-product-id');

                if (productId) {
                    addToCart(productId);
                } else {
                    console.error('No product ID found on the button.');
                }
            }
        });

        // Set up cart icon click handler (ensure it’s only added once)
        const cartIcon = document.getElementById('cartIcon');
        const cartContainer = document.querySelector('.nav-cart-container');
        let isCartOpen = false;

        cartIcon.addEventListener('click', (e) => {
            e.preventDefault();
            isCartOpen = !isCartOpen;
            cartContainer.style.display = isCartOpen ? 'block' : 'none';
        });

        // Close cart dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!cartIcon.contains(e.target) && !cartContainer.contains(e.target)) {
                cartContainer.style.display = 'none';
                isCartOpen = false;
            }
        });

        // Handle "Show" filter clicks
        document.querySelectorAll('.show-option').forEach(option => {
            option.addEventListener('click', (e) => {
                e.preventDefault();
                const limit = e.target.getAttribute('data-limit');
                currentLimit = limit === 'all' ? 'all' : parseInt(limit);
                loadProducts(); // Reload products with new limit
                // Update active class for visual feedback
                document.querySelectorAll('.show-option').forEach(opt => opt.classList.remove('active'));
                e.target.classList.add('active');
            });
        });

        // Initial cart display
        updateCartDisplay();

        // Listen for cart updates from localStorage changes
        window.addEventListener('storage', () => {
            cart = JSON.parse(localStorage.getItem('cart')) || [];
            updateCartDisplay();
        });
    });
  </script>
</body>
</html>